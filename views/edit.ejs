<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= user.username%>
    </title>
    <link rel="stylesheet" href="/stylesheets/styles.css">

</head>

<body>
    <nav class="nav-bar edit-nav-bar">
        <a class="nav-items user" href="/home">Go back</a>
    </nav>
    <section>
        <div class="create-post main-cont">
            <form action="/update/<%=post._id%>" method="POST">
                <h1 class="heading post-heading">Edit post</h1>
                <textarea required rows="4" class="post-content" placeholder=""
                    name="content"><%=post.content%></textarea>
                <input class="submit-form post-submit unabled" disabled id="submit" type="submit" value="Update Post">
            </form>
        </div>
    </section>
    <script>
        let text = document.getElementsByClassName('post-content')[0];
        let initialValue = `<%= post.content %>`;

        text.addEventListener('input', () => {
            let btn = document.getElementsByClassName('post-submit')[0];
            btn.classList.remove("unabled");
            btn.disabled = false;

            let text = document.getElementsByClassName('post-content')[0];
            let textValue = text.value;

            if (textValue === initialValue) {
                btn.classList.add("unabled");
                btn.disabled = true;
            } else {
                btn.classList.remove(unabled);
                btn.disabled = false;
            }
        });
    </script>
</body>

</html>